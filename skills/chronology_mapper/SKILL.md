# SKILL: Chronology Mapper

---
name: Chronology Mapper
description: Сопоставление дат TMRCA с историческими эпохами и археологическими культурами
---

## Назначение

Этот скилл определяет методологию привязки генеалогических дат (TMRCA) к историческим эпохам, археологическим культурам и историческим событиям на Кавказе и в сопредельных регионах.

## Определения эпох

### Глобальные исторические эпохи

| Эпоха | Диапазон (лет назад) | Годы н.э./до н.э. | Ключевые характеристики |
|-------|---------------------|-------------------|--------------------------|
| **Палеолит** | > 12000 | до ~10000 г. до н.э. | Каменный век, охотники-собиратели |
| **Мезолит** | 12000-10000 | 10000-8000 г. до н.э. | Переход к оседлости |
| **Неолит** | 10000-5500 | 8000-3500 г. до н.э. | Земледелие, скотоводство |
| **Бронзовый век** | 5500-3200 | 3500-1200 г. до н.э. | Металлургия, первые государства |
| **Железный век** | 3200-2500 | 1200-500 г. до н.э. | Железное оружие, урбанизация |
| **Античность** | 2500-1500 | 500 г. до н.э. - 500 г. н.э. | Греческие колонии, римское влияние |
| **Раннее Средневековье** | 1500-1000 | 500-1000 г. н.э. | Великое переселение народов, хазары |
| **Высокое Средневековье** | 1000-500 | 1000-1500 г. н.э. | Алания, Зихия, Абазгия |
| **Позднее Средневековье** | 500-250 | 1500-1750 г. н.э. | Кабардинское княжество, Крымское ханство |
| **Новое время** | 250-100 | 1750-1900 г. н.э. | Русско-кавказские войны |
| **Новейшее время** | < 100 | 1900-н.в. | Мухаджирство, современность |

### Кавказская хронология

| Период (лет назад) | Эпоха | Археологические культуры | Исторические образования |
|--------------------|-------|---------------------------|--------------------------|
| 5500-4500 | Ранняя бронза | Майкопская культура | Прототохарские миграции |
| 4500-3500 | Средняя бронза | Кобанская культура (ранняя) | Синдо-меотский союз |
| 3500-2800 | Поздняя бронза | Кобанская культура (расцвет) | Колхидская культура |
| 2800-2500 | Поздняя бронза | Срубная культура | Киммерийцы |
| 2500-2200 | Ранняя античность | Скифская эпоха | Синды, меоты, зихи |
| 2200-1800 | Классическая античность | Боспорское царство | Греческие колонии |
| 1800-1500 | Поздняя античность | Гуннское нашествие | Аланы, абазги |
| 1500-1000 | Раннее средневековье | Аланская культура | Алания, Абазгия, Зихия |
| 1000-500 | Высокое средневековье | Алано-осетинская культура | Алания (Северный Кавказ) |
| 500-300 | Позднее средневековье | Кабардинская культура | Кабардинское княжество |
| 300-200 | Новое время | Кавказские войны | Мухаджирство |
| < 200 | Новейшее время | Советский период | Современность |

## Алгоритм классификации

### Шаг 1: Определение эпохи

```python
def classify_epoch(tmrca_years_ago):
    """Классифицирует TMRCA по исторической эпохе"""
    if tmrca_years_ago > 12000:
        return "Палеолит"
    elif tmrca_years_ago > 10000:
        return "Мезолит"
    elif tmrca_years_ago > 5500:
        return "Неолит"
    elif tmrca_years_ago > 3200:
        return "Бронзовый век"
    elif tmrca_years_ago > 2500:
        return "Железный век"
    elif tmrca_years_ago > 1500:
        return "Античность"
    elif tmrca_years_ago > 1000:
        return "Раннее Средневековье"
    elif tmrca_years_ago > 500:
        return "Высокое Средневековье"
    elif tmrca_years_ago > 250:
        return "Позднее Средневековье"
    elif tmrca_years_ago > 100:
        return "Новое время"
    else:
        return "Новейшее время"
```

### Шаг 2: Определение регионального контекста

```python
def get_caucasian_context(tmrca_years_ago):
    """Возвращает кавказский исторический контекст"""
    contexts = {
        (5500, 4500): {
            "culture": "Майкопская культура",
            "description": "Раннебронзовая культура Северного Кавказа, известная богатым погребальным инвентарём",
            "peoples": ["Прото-адыги", "Прото-абхазы"]
        },
        (3500, 2800): {
            "culture": "Кобанская культура (расцвет)",
            "description": "Железный век Центрального Кавказа, характерна бронзовым оружием и конской упряжью",
            "peoples": ["Синды", "Меоты", "Зихи"]
        },
        (1500, 1000): {
            "culture": "Алания",
            "description": "Средневековое аланское государство, предшественник осетин",
            "peoples": ["Аланы", "Асы"]
        },
        (500, 300): {
            "culture": "Кабардинское княжество",
            "description": "Государственное образование кабардинцев (адыгов) в составе Грузии и позже России",
            "peoples": ["Кабардинцы", "Князья"]
        },
        (300, 200): {
            "culture": "Кавказские войны",
            "description": "Период русско-кавказских войн и мухаджирства (выселения адыгов в Османскую империю)",
            "peoples": ["Адыги", "Абхазы", "Мухаджиры"]
        }
    }
    
    for (start, end), context in contexts.items():
        if end <= tmrca_years_ago < start:
            return context
    
    # Если диапазон не найден
    if tmrca_years_ago > 5500:
        return {"culture": "Древние культуры", "description": "Дописьменный период Кавказа", "peoples": []}
    else:
        return {"culture": "Современный период", "description": "XX-XXI века", "peoples": []}
```

### Шаг 3: Форматирование вывода

```python
def format_chronology(tmrca_years_ago, current_year=2026):
    """Форматирует хронологическую информацию"""
    
    # 1. Эпоха
    epoch = classify_epoch(tmrca_years_ago)
    
    # 2. Годы
    if tmrca_years_ago > current_year:
        year = current_year - tmrca_years_ago
        if year < 0:
            formatted_year = f"≈ {abs(year)} г. до н.э."
        else:
            formatted_year = f"≈ {year} г. н.э."
    else:
        formatted_year = "Современность"
    
    # 3. Кавказский контекст
    context = get_caucasian_context(tmrca_years_ago)
    
    return {
        "tmrca": f"{tmrca_years_ago} лет назад",
        "year": formatted_year,
        "epoch": epoch,
        "culture": context["culture"],
        "description": context["description"],
        "peoples": context["peoples"]
    }
```

## Формат вывода

### Для документации

```markdown
## Хронологический контекст

| Параметр | Значение |
|----------|----------|
| **TMRCA** | {X} лет назад |
| **Дата** | ≈ {Year} |
| **Эпоха** | {Epoch} |
| **Археологическая культура** | {Culture} |
| **Исторический контекст** | {Description} |

### Историческая эпоха

В период {Year} ({Epoch}) на Кавказе существовала {Culture}:
{Description}

Связанные народы: {People1}, {People2}, ...
```

### Для анализа ветви

```markdown
### {Haplogroup-ID} — {TMRCA лет назад}

**Хронология:**
- **TMRCA:** {X} лет назад (≈ {Year})
- **Эпоха:** {Epoch}
- **Культура:** {Culture}

**Исторический контекст:**
{Description}

Этот период соответствует {Historical Event/Culture}, что позволяет предположить {Interpretation}.
```

## Шаблоны интерпретации

### Для древних ветвей (> 4000 лет)

```markdown
## Древняя ветвь ({TMRCA лет назад)

TMRCA этой ветви ({Year}, {Epoch}) предшествует формированию современных адыго-абхазских этносов.

**Хронологический контекст:**
- {Culture} — {Description}

**Интерпретация:**
Данная ветвь могла быть частью генетического пула {Ancient People}, который впоследствии участвовал в этногенезе современных народов Кавказа. Необходимо сравнение с древними ДНК ({Culture} или сопряжённые культуры).
```

### Для средневековых ветвей (1000-2000 лет)

```markdown
## Средневековая ветвь ({TMRCA лет назад)

TMRCA ({Year}) соответствует периоду {Historical State/Culture}.

**Хронологический контекст:**
- {Culture} — {Description}

**Интерпретация:**
Возможное формирование ветви в рамках {Historical Formation}. Образцы {Subethnos1} и {Subethnos2} могут указывать на {Migration/Assimilation} в этот период.
```

### Для молодых ветвей (< 500 лет)

```markdown
## Молодая ветвь ({TMRCA лет назад)

TMRCA ({Year}) соответствует периоду {Recent Event}.

**Хронологический контекст:**
- {Event} — {Description}

**Интерпретация:**
Молодой возраст ветви указывает на {Clan Founder/Recent Migration}. Фамилии {Surname1}, {Surname2} могут происходить от {Common Ancestor}.

> [!NOTE]
> Возможен эффект основателя или неполное покрытие тестированием.
```

## Примеры использования

### Пример 1: Древняя ветвь (G2a, ~4800 лет)

```python
>>> format_chronology(4800)
{
    "tmrca": "4800 лет назад",
    "year": "≈ 2774 г. до н.э.",
    "epoch": "Бронзовый век",
    "culture": "Кобанская культура (ранняя)",
    "description": "Раннебронзовая культура Центрального Кавказа",
    "peoples": ["Синдо-меотский племенной союз"]
}
```

**Вывод в Markdown:**
```markdown
## Хронологический контекст

| Параметр | Значение |
|----------|----------|
| **TMRCA** | 4800 лет назад |
| **Дата** | ≈ 2774 г. до н.э. |
| **Эпоха** | Бронзовый век |
| **Археологическая культура** | Кобанская культура (ранняя) |

### Историческая эпоха

В период ≈ 2774 г. до н.э. (Бронзовый век) на Кавказе существовала Кобанская культура:
Раннебронзовая культура Центрального Кавказа

Связанные народы: Синдо-меотский племенной союз
```

### Пример 2: Средневековая ветвь (R-Z2103, ~3300 лет)

```python
>>> format_chronology(3300)
{
    "tmrca": "3300 лет назад",
    "year": "≈ 1274 г. до н.э.",
    "epoch": "Поздняя бронза",
    "culture": "Колхидская культура",
    "description": "Западнокавказская культура поздней бронзы",
    "peoples": ["Колхи", "Прото-абхазы"]
}
```

### Пример 3: Молодая ветвь (G-S9409, ~750 лет)

```python
>>> format_chronology(750)
{
    "tmrca": "750 лет назад",
    "year": "≈ 1276 г. н.э.",
    "epoch": "Высокое Средневековье",
    "culture": "Алания",
    "description": "Средневековое аланское государство",
    "peoples": ["Аланы"]
}
```

## Правила интерпретации

### 1. Не путать эпоху происхождения с эпохой экспансии

❌ **Ошибочно:** "Гаплогруппа G2a возникла в эпоху алан"
✅ **Правильно:** "Гаплогруппа G2a сформировалась в бронзовом веке (кобанская культура), но её экспансия среди осетин произошла позже в эпоху алан"

### 2. Учитывать историческую динамику

```python
def interpret_branch_formation(tmrca, subethnos_distribution):
    """Интерпретирует формирование ветви с учётом распределения"""
    
    # Если TMRCA древний, но субэтносы современные
    if tmrca > 2000 and len(subethnos_distribution) > 1:
        return "Древнее происхождение с последующей диверсификацией"
    
    # Если TMRCA молодой и субэтносы локальны
    if tmrca < 500 and len(subethnos_distribution) == 1:
        return "Клановое происхождение с эффектом основателя"
    
    # Если TMRCA средневековый
    if 500 <= tmrca <= 2000:
        return "Средневековое формирование в рамках {Historical State}"
    
    return "Требуется дополнительный анализ"
```

### 3. Проверка на анахронизмы

| TMRCA (лет назад) | ❌ НЕЛЬЗЯ утверждать | ✅ МОЖНО утверждать |
|-------------------|---------------------|---------------------|
| 4800 | "Осетинская гаплогруппа" | "Древняя ветвь, представленная у осетинов" |
| 3300 | "Кабардинская ветвь" | "Предкавказская ветвь" |
| 1200 | "Адыгская гаплогруппа" | "Средневековая ветвь, представленная среди адыгов" |
| 300 | "Княжеская родословная" | "Молодая клановая ветвь" |

## Интеграция с другими скиллами

### Связь с Subclade Analyzer

При анализе субклада:

```python
# 1. Получить TMRCA из current_tree.json
node = find_node(tree, haplogroup_id)
tmrca = node['tmrca']

# 2. Получить хронологию
chronology = format_chronology(tmrca)

# 3. Использовать в описании ветви
subclade_description = f"""
## {haplogroup_id}

### Хронология
{chronology_to_markdown(chronology)}

### Исторический контекст
На основе даты TMRCA ({tmrca} лет назад) можно предположить:
{interpret_chronology_for_circassians(chronology, subethnos_data)}
"""
```

### Связь с Anti-Founder Effect

```python
def validate_chronology_against_founder_effect(tmrca, dominant_subethnos_percentage):
    """Проверяет, не является ли доминирование эффектом основателя"""
    
    if tmrca < 500 and dominant_subethnos_percentage > 70:
        return """
> [!WARNING]
> Молодой возраст ветви ({TMRCA лет назад) и доминирование одного субэтноса ({X}%)
> могут указывать на эффект основателя или неполное покрытие тестированием.
"""
    
    return ""
```

## Ссылки на исторические источники

При ссылке на исторические эпохи использовать:

| Эпоха | Рекомендуемые источники |
|-------|-------------------------|
| Бронзовый век (Майкоп, Кобан) | Кузнецова, 2000; Кореневский, 2001 |
| Античность (Боспорское царство) | Блаватский, 1949; Виноградов, 1985 |
| Средневековье (Алания, Зихия) | Кузнецов, 1992; Ковалевская, 1981 |
| Кавказские войны | Фадеев, 2005; Потто, 1999 |
| Мухаджирство | Берже, 1982; Хашба, 1998 |

## Глоссарий

| Термин | Определение |
|--------|-------------|
| **TMRCA** | Time to Most Recent Common Ancestor — время до ближайшего общего предка протестированных образцов |
| **Эпоха** | Крупный период в истории человечества (Бронзовый век, Средневековье и т.д.) |
| **Археологическая культура** | Группа памятников, объединённых общими чертами материальной культуры |
| **Хронологический контекст** | Историческая эпоха и культура, соответствующая TMRCA |
| **Анахронизм** | Приписывание событий/явлений несоответствующему периоду |

---

**Версия:** 1.0
**Автор:** Ralph Skills System
**Обновлено:** 2026-01-28
